function formatNumber(e,t){let s=e;if(Number.isFinite(s))s=String(t?s:Math.round(s));else if(!s||"string"!=typeof s)return"";s=s.replace(t?/[^\d\.]/g:/([^\d\.]|(\.\d*)+$)/g,""),t&&/^\./.test(s)&&(s="0"+s);const o=t?Number.isFinite(t)&&t>0?new RegExp(`((?<=\\..*)\\.|(?<=\\.\\d{${t}})\\d+$|^0+(?=\\d))`,"g"):/((?<=\..*)\.|^0+(?=\d))/g:/(\D|^0+(?=\d))/g,n=/(?<!\.\d*)\B(?=(\d{3})+(?!\d))/g;return s.replace(o,"").replace(n,",")}function setCustomExpensePayer(e){paidByRadioBtns.forEach(function(t){t.id.includes(e)&&(t.checked=!0)})}function editCustomeExpense(e){var t=customExpenseItems.filter(function(t){return t.keyId===e});customExpenseTitle.value=t[0].feeDescription,t[0].paidBySeller?customExpenseValue.value=formatNumber(t[0].paidBySeller):t[0].paidByBuyer?customExpenseValue.value=formatNumber(t[0].paidByBuyer):t[0].paidByOwner&&(customExpenseValue.value=formatNumber(t[0].paidByOwner)),paidByRadioBtns.forEach(function(e){e.id===t[0].paidBy&&(e.checked=!0)}),customExpenseForm.classList.add("update-form"),customExpenseForm.setAttribute("data-key",t[0].keyId),customExpenseForm.style.display="block",calculateAllCosts()}function deleteCustomeExpense(e){customExpenseItems=customExpenseItems.filter(function(t){return t.keyId!==e}),renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),calculateAllCosts()}function renderExpense(e){var t="";e.paidBySeller&&e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidBySeller?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$0</div>\n</div>\n</div>`:e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$0</div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidByOwner&&(t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper owner block">\n<div class="cost-group__cost-amount owner-cost-wrapper">$<span class="owner-cost">${formatNumber(e.paidByOwner)}</span></div>\n</div>\n</div>`);var s=document.querySelector(e.targetClass),o=document.createElement("div");o.innerHTML=t,s.appendChild(o)}function renderCustomExpenses(e){customCostsResults.innerHTML="",e.forEach(function(e){renderExpense(e)})}function renderCustomExpenseControl(e){customCostsControlOutput.innerHTML="",e.length>0?customCostsControlsContainer.style.display="block":0===e.length&&(customCostsControlsContainer.style.display="none"),e.forEach(function(e){var t="";e.paidBySeller?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidBySeller)}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByBuyer?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByBuyer)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByOwner&&(t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByOwner)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`);var s=document.createElement("div");s.innerHTML=t,customCostsControlOutput.appendChild(s)})}function calculateAllCosts(){var e=document.querySelectorAll(".cost-group__cost-wrapper"),t=0,s=0,o=0;e.forEach(function(e){var n=e.querySelector(".seller-cost"),r=e.querySelector(".buyer-cost"),a=e.querySelector(".owner-cost");n?isNaN(Number(n.textContent.replaceAll(",","")))||(t+=Number(n.textContent.replaceAll(",",""))):r?isNaN(Number(r.textContent.replaceAll(",","")))||(s+=Number(r.textContent.replaceAll(",",""))):a&&(isNaN(Number(a.textContent.replaceAll(",","")))||(o+=Number(a.textContent.replaceAll(",",""))))}),totalSellerCostsEl.textContent=formatNumber(t),totalBuyerCostsEl.textContent=formatNumber(s),totalOwnerCostsEl.textContent=formatNumber(o);var n=parseFloat(document.querySelector("#sale-price").value.replaceAll(",",""))-t;netSellerProceedsEl.textContent=formatNumber(n)}window.addEventListener("load",function(){function e(){var e=document.querySelector("#sales-with-mortgage");e.checked=!0,$.disabled=!0,f("disable")}function t(){K.forEach(function(e){e.style.display="flex"})}function s(){Q.forEach(function(e){e.innerHTML="",e.closest(".cost-group__wrapper").style.display="block"})}function o(){Q.forEach(function(e){var t=e.querySelectorAll(".cost-group__cost");t.length?e.closest(".cost-group__wrapper").style.display="flex":e.closest(".cost-group__wrapper").style.display="none"})}function n(){P.forEach(function(e){e.style.display="flex"}),z.forEach(function(e){e.style.display="flex"}),j.forEach(function(e){e.style.display="flex"}),M.forEach(function(e){e.style.display="flex"}),U.forEach(function(e){e.style.display="none"})}function r(){W.forEach(function(e){e.classList.remove("disabled-text")})}function a(e){e&&e.classList.add("download-pdf-active")}function l(e){e&&e.classList.remove("download-pdf-active")}function c(e){return`${e.toLocaleDateString().replace(/[\/\.]/g,"-")}_${e.toLocaleTimeString().replace(/:/g,"-").replace(/[\s\.]/g,"")}`}function i(){Z.style.display="flex",ee.forEach(function(e){e.style.display="block"}),te.forEach(function(e){e.style.display="block",e.style.opacity="0",e.style.pointerEvents="none"}),ne.forEach(function(e){e.style.opacity="0"}),se.style.opacity="0",oe.style.opacity="0"}function u(){Z.style.display="none",ee.forEach(function(e){e.style.opacity="0",setTimeout(function(){e.style.display="none",e.style.opacity="1"},800)}),ne.forEach(function(e){e.style.opacity="1"}),te.forEach(function(e){e.style.display="none"}),se.style.opacity="1",oe.style.opacity="1"}function d(){O.forEach(function(e){e.addEventListener("keypress",function(e){var t=e.target.value;(e.which<48||e.which>57)&&("."===e.key?t.includes(".")&&e.preventDefault():e.preventDefault())})})}function p(){O.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value.replaceAll(",",""),s=e.target.id;if(s.includes("amount")){var o=s.replace("amount","percentage"),n=document.querySelector(`#${o}`);if(n){var r=parseFloat(I.value.replaceAll(",",""));Number.isFinite(r)&&(n.value=formatNumber(t/r*100,2))}}else if(s.includes("percentage")){o=s.replace("percentage","amount"),n=document.querySelector(`#${o}`);if(n){r=parseFloat(I.value.replaceAll(",",""));Number.isFinite(r)&&(n.value=formatNumber(r*t/100))}}})})}function m(e){"sales-with-mortgage"===e?(n(),G.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"sales-with-cash"===e?(n(),P.forEach(function(e){e.style.display="none"}),G.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"refinance"===e&&(n(),z.forEach(function(e){e.style.display="none"}),M.forEach(function(e){e.style.display="none"}),j.forEach(function(e){e.style.display="none"}),U.forEach(function(e){e.style.display="flex"}),G.classList.add("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems))}function y(){var e=I.value.replaceAll(",",""),t=L.value.replaceAll(",",""),s=D.value.replaceAll(",","");k.checked?J&&Number(e)>0&&Number(t)>0&&Number(t)<=Number(e)&&Number(s)>=0&&Number(s)<=100?$.disabled=!1:$.disabled=!0:B.checked?J&&Number(e)>0?$.disabled=!1:$.disabled=!0:N.checked&&(J&&Number(t)>0?$.disabled=!1:$.disabled=!0)}function f(e){V.forEach(function(t){var s=t.querySelectorAll("input");s.forEach(function(t){t.disabled="enable"!==e})})}function v(e){var t=_+"/validate-address",s="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",o=new Headers;o.append("Content-Type","application/json"),o.append("X-API-KEY",s);var n={method:"POST",headers:o,body:JSON.stringify(e)},r=new Request(t,n);fetch(r).then(e=>e.json()).then(e=>{fe=e,fe.statusCode?b(fe.message):x()})}function g(e){bUrl=_+"/rates";var t="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",s=new Headers;s.append("Content-Type","application/json"),s.append("X-API-KEY",t);var o={method:"POST",headers:s,body:JSON.stringify(e)};l(Y),i();var n=new Request(bUrl,o);fetch(n).then(e=>{if(e.ok)return e.json();throw new Error("")}).then(e=>{fe=e,S(),C(),u()}).catch(e=>{w(),u()})}function E(){ve=new google.maps.places.Autocomplete(document.getElementById("property-address"),{types:["geocode"],componentRestrictions:{country:["US"]},fields:["adr_address","address_components"]}),ve.addListener("place_changed",h)}function b(e){Ee.style.borderColor="#ED5564",ge.style.color="#ED5564",be.style.display="block",be.innerHTML=e||'Sorry, Endpoint is only available in these <a class="property-error-link" href="/licenses#counties">select locations</a>',J=!1,y()}function x(){be.style.display="none",Ee.style.borderColor="#A2A2A2",ge.style.color="#858585",J=!0,y()}function h(){ye={};var e=ve.getPlace();if(e.address_components){me.innerHTML=e.adr_address;var t=me.querySelector(".street-address"),s=me.querySelector(".locality"),o=me.querySelector(".region"),n=me.querySelector(".postal-code");t?(ye.street1=t.textContent,ye.street2=""):(ye.street1="",ye.street2=""),ye.city=s?s.textContent:"",ye.state=o?o.textContent:"",ye.zipCode=n?n.textContent:"";var r=e.address_components.filter(e=>e.long_name.includes("County"));if(r.length?ye.county=r[0].long_name.replace(" County",""):ye.county="",k.checked?ye.transactionType="Sale w/ Mortgage":B.checked?ye.transactionType="Sale/Cash":N.checked&&(ye.transactionType="Refinance"),Ee.blur(),""===ye.street1||""===ye.city||""===ye.state||""===ye.zipCode)return void b("We couldn't find that address. Please enter a street address, city, and state.");v(ye)}else b(),y()}function S(){var e="",t="",s=0,n=0,r=0,l=0;for(const[o,a]of Object.entries(fe)){"Owner's Title Insurance"===o?e=".owners-title-insurance":"Lender's Title Insurance"===o?e=".lenders-title-insurance":"Taxes and other Government Fees Section"===o?e=".taxes-government-fees":"Settlement/Escrow"===o&&(e=".settlement-escrow");for(const[o,i]of Object.entries(a)){t=i.feeDescription;for(const[o,a]of Object.entries(i))if("payments"==o){for(const[e,t]of Object.entries(a))"Seller"==t.feePaidBy?s=t.feeAmount:N.checked&&"Buyer"==t.feePaidBy?r=t.feeAmount:"Buyer"==t.feePaidBy&&(n=t.feeAmount);var c={targetClass:e,feeDescription:t,paidBySeller:s,paidByBuyer:n,paidByOwner:r,keyId:l};renderExpense(c),s=0,n=0,r=0,l++}}}o(),calculateAllCosts(),a(Y)}function w(){xe.style.display="flex"}function C(){xe.style.display="none"}var _=/webflow/i.test(window.location.hostname)?"https://fee-calculator-service.development.endpointclosing.com":"https://fee-calculator-service.endpointclosing.com",A=document.querySelector(".fee-calculator__results-bottom"),q=document.querySelector(".transaction-type--container"),k=document.querySelector("#sales-with-mortgage"),B=document.querySelector("#sales-with-cash"),N=document.querySelector("#refinance"),I=document.querySelector("#sale-price"),L=document.querySelector("#loan-amount"),D=document.querySelector("#loan-percentage"),$=document.querySelector(".calculate-fees"),T=document.querySelectorAll("#property-form input[type=text]:not(#property-address)"),V=document.querySelectorAll(".form--disabled"),O=document.querySelectorAll(".number-input"),F=document.querySelector(".additional-expense-form"),P=document.querySelectorAll(".hide-for-cash"),R=document.querySelectorAll(".hide-for-cash-form"),z=document.querySelectorAll(".hide-for-refinance"),H=document.querySelectorAll(".hide-for-refinance-form"),j=document.querySelectorAll(".buyer"),M=document.querySelectorAll(".seller"),U=document.querySelectorAll(".owner"),G=document.querySelector(".custom-expenses-form-control"),K=document.querySelectorAll(".base-input"),W=document.querySelectorAll(".disabled-text"),Y=document.querySelector(".download-pdf"),J=!1,X=!1,Q=document.querySelectorAll(".api-fetched-items");Y.addEventListener("click",function(){if(Y.classList.contains("download-pdf-active")){var e=A.cloneNode(!0),t=document.querySelector(".disclaimer-text").cloneNode(!0),s=document.querySelector(".navigation-logo");"anonymous"!==s.crossOrigin&&(s.crossOrigin="*");for(var o=0;o<t.children.length;o++){var n=t.children[o];if("A"===n.tagName){for(var r in n.dataset)"beforebegin"!==r&&"afterbegin"!==r&&"beforeend"!==r&&"afterend"!==r||n.insertAdjacentText(r,n.dataset[r]);n.innerText=n.href}}e.style.padding="0",t.style.marginTop="48px",e.appendChild(t),new window.jspdf.jsPDF({unit:"px",format:"a4"}).html(e,{callback(e){var t=document.createElement("canvas");t.width=372,t.height=80,t.getContext("2d").drawImage(s,0,0,t.width,t.height),e.addImage(t.toDataURL("image/png"),"PNG",32,32,74.5,16).save(`closing-cost_${c(new Date)}.pdf`)},margin:[72,32,32,32],x:0,y:0,width:380,windowWidth:880})}});var Z=document.querySelector(".loading-spinner__container"),ee=document.querySelectorAll(".cost-data__animation-container"),te=document.querySelectorAll(".cost-data-template"),se=document.querySelector(".additional-expense__wrapper"),oe=document.querySelector(".net-proceeds__wrapper"),ne=document.querySelectorAll(".total-cost");O.forEach(function(e){e.addEventListener("input",function(e){e.target.value=formatNumber(e.target.value,e.target.id.includes("percentage")?2:0)})}),q.addEventListener("change",function(e){var s=e.target;if(X?X&&("sales-with-mortgage"===s.id?t():"sales-with-cash"===s.id?(t(),R.forEach(function(e){e.style.display="none"})):"refinance"===s.id&&(t(),H.forEach(function(e){e.style.display="none"}))):m(s.id),ye&&ye.street1&&ye.city&&ye.state&&ye.zipCode){"sales-with-mortgage"===s.id?ye.transactionType="Sale w/ Mortgage":"sales-with-cash"===s.id?ye.transactionType="Sale/Cash":"refinance"===s.id&&(ye.transactionType="Refinance");var o={};o.street1=ye.street1,o.street2=ye.street2,o.city=ye.city,o.county=ye.county,o.state=ye.state,o.zipCode=ye.zipcode,o.transactionType=ye.transactionType,v(o)}}),T.forEach(function(e){e.addEventListener("input",function(e){y()})}),e(),p(),d();var re=document.querySelectorAll("input[type=text]");re.forEach(function(e){e.addEventListener("focus",function(e){e.target.classList.add("in-focus")}),e.addEventListener("blur",function(e){e.target.classList.remove("in-focus")})});var ae=document.querySelectorAll(".input-amount");I.addEventListener("input",function(e){var t=Number(e.target.value.replaceAll(",",""));ae.forEach(function(e){const s=parseFloat(e.value.replaceAll(",",""));if(Number.isFinite(s)&&s>0){var o=document.querySelector(`#${e.id.replace("amount","percentage")}`);o&&(o.value=formatNumber(s/t*100,2))}})}),O.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value,s=e.target.closest(".fee-calculator__input-container"),o=s.querySelector(".fee-calculator__input-label"),n=s.querySelectorAll(".fee-calculator__input"),r=s.querySelector(".form-error");""===t?(o.style.color="#ED5564",n.forEach(function(e){e.style.borderColor="#ED5564"}),r.style.display="block"):(o.style.color="#858585",n.forEach(function(e){e.style.borderColor="#A2A2A2"}),r.style.display="none")})}),O.forEach(function(e){e.addEventListener("paste",function(e){var t=(e.clipboardData||window.clipboardData).getData("text");if(isNaN(Number(t)))e.preventDefault();else{if(!t.includes("-"))return!0;e.preventDefault(),e.target.value=t.replace("-","")}})});var le=document.querySelectorAll(".additional-expense-form input:not(.closing-date)"),ce=[];le.forEach(function(e){e.addEventListener("input",function(e){targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount"));const t=document.querySelector(`.${targetId} .seller-cost`),s=parseFloat(document.querySelector(`#${targetId}`).value.replaceAll(",","")),o=parseFloat(I.value.replaceAll(",",""));Number.isFinite(s)&&Number.isFinite(o)&&s>0&&s<o?t.textContent=formatNumber(s):t.textContent="0",calculateAllCosts()})});var ie=!1,ue=!1,de=!1;le.forEach(function(e){e.addEventListener("blur",function(e){if(targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount")),targetValue=document.querySelector(`#${targetId}`).value.replaceAll(",",""),targetId.includes("listing"))if(ie)if(0===Number(targetValue))ce=ce.filter(function(e){return"Estimated Listing Agent Commissions"!==e.feeDescription}),ie=!1;else for(var t in ce)"Estimated Listing Agent Commissions"===ce[t].feeDescription&&(ce[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ce.push({feeDescription:"Estimated Listing Agent Commissions",paidBySeller:Number(targetValue)}),ie=!0);else if(targetId.includes("selling"))if(ue)if(0===Number(targetValue))ce=ce.filter(function(e){return"Estimated Selling Agent Commissions"!==e.feeDescription}),ue=!1;else for(var t in ce)"Estimated Selling Agent Commissions"===ce[t].feeDescription&&(ce[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ce.push({feeDescription:"Estimated Selling Agent Commissions",paidBySeller:Number(targetValue)}),ue=!0);else if(targetId.includes("current"))if(de)if(0===Number(targetValue))ce=ce.filter(function(e){return"Current Loan Payoff"!==e.feeDescription}),de=!1;else for(var t in ce)"Current Loan Payoff"===ce[t].feeDescription&&(ce[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ce.push({feeDescription:"Current Loan Payoff",paidBySeller:Number(targetValue)}),de=!0)})});var pe=document.querySelector(".closing-date");pe.addEventListener("blur",function(e){var t=e.target.value,s=e.target.closest(".fee-calculator__input-container"),o=s.querySelector(".fee-calculator__input-label"),n=s.querySelector(".form-error");""===t?(o.style.color="#ED5564",pe.style.borderColor="#ED5564",n.style.display="block"):(o.style.color="#858585",pe.style.borderColor="#A2A2A2",n.style.display="none")});var me=document.querySelector(".google-location-info"),ye={},fe={};let ve;var ge=document.querySelector(".property-label"),Ee=document.querySelector("#property-address"),be=document.querySelector(".property-error");Ee.addEventListener("change",function(){y()}),Ee.addEventListener("blur",function(e){""===e.target.value&&b("Please enter an address"),y()}),Ee.addEventListener("keypress",function(e){if(13==e.which){var t=document.querySelectorAll(".pac-container .pac-item");t.length>0&&(google.maps.event.trigger(e.target,"keydown",{keyCode:40,hasRanOnce:!0}),google.maps.event.trigger(e.target,"keydown",{keyCode:13,hasRanOnce:!0}))}});var xe=document.querySelector(".api-call-error"),he=document.querySelector(".api-call-error__close");he.addEventListener("click",function(e){xe.style.display="none"}),$.addEventListener("click",function(e){e.preventDefault();var t="";k.checked?(t="sales-with-mortgage",ye.transactionType="Sale w/ Mortgage",ye.salesAmount=Number(I.value.replaceAll(",","")),ye.loanAmount=Number(L.value.replaceAll(",","")),setCustomExpensePayer("seller")):B.checked?(t="sales-with-cash",ye.transactionType="Sale/Cash",ye.salesAmount=Number(I.value.replaceAll(",","")),ye.loanAmount=0,setCustomExpensePayer("seller")):N.checked&&(t="refinance",ye.transactionType="Refinance",ye.salesAmount=0,ye.loanAmount=Number(L.value.replaceAll(",","")),setCustomExpensePayer("owner")),ye.effectiveDate=new Date(Date.now()-60*(new Date).getTimezoneOffset()*1e3).toISOString().substring(0,10),g(ye),X?(s(),m(t)):(f("enable"),F.classList.remove("form--disabled"),r(),document.querySelector(".add-custom-expense--disabled").classList.remove("add-custom-expense--disabled"),X=!0),calculateAllCosts()}),E()});var addCustomExpenseBtn=document.querySelector(".add-custom-expense"),customExpenseForm=document.querySelector(".custom-expense-form"),customExpenseTitle=document.querySelector("#additional-expense-name"),customExpenseValue=document.querySelector("#additional-expense-value"),paidByRadioBtns=document.querySelectorAll(".paid-by__radio-button"),deleteExpenseBtn=document.querySelector(".delete-custom-expense"),customCostsResults=document.querySelector(".custom-costs"),saveExpenseBtn=document.querySelector(".save-custom-expense"),cancelExpenseBtn=document.querySelector(".cancel-custom-expense"),updateExpenseBtn=document.querySelector(".update-custom-expense"),customCostsControlsContainer=(deleteExpenseBtn=document.querySelector(".delete-custom-expense"),document.querySelector(".custom-expenses-form-control")),customCostsControlOutput=document.querySelector(".custom-costs-control-wrapper"),customExpenseItems=[],key=1;customExpenseTitle.addEventListener("blur",function(e){var t=e.target.value,s=e.target.closest(".fee-calculator__input-container"),o=s.querySelector(".fee-calculator__input-label"),n=s.querySelector(".fee-calculator__input"),r=s.querySelector(".form-error");""===t?(o.style.color="#ED5564",n.style.borderColor="#ED5564",r.style.display="block"):(o.style.color="#858585",n.style.borderColor="#A2A2A2",r.style.display="none")}),addCustomExpenseBtn.addEventListener("click",function(){customExpenseForm.style.display="block"}),deleteExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t=customExpenseForm.dataset.key;deleteCustomeExpense(t),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts()}),cancelExpenseBtn.addEventListener("click",function(e){customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form")}),updateExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";for(var s in paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),customExpenseItems)if(customExpenseItems[s].keyId==customExpenseForm.dataset.key){customExpenseItems[s].feeDescription=customExpenseTitle.value,"paid-by-seller"===t?(customExpenseItems[s].paidBySeller=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[s].paidByBuyer=""):"paid-by-buyer"===t?(customExpenseItems[s].paidByBuyer=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[s].paidBySeller=""):"paid-by-owner"===t&&(customExpenseItems[s].paidByOwner=Number(customExpenseValue.value.replaceAll(",",""))),customExpenseItems[s].paidBy=t;break}customExpenseTitle.value="",customExpenseValue.value="",renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form"),calculateAllCosts()}),saveExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),""!==customExpenseTitle.value&&""!==customExpenseValue.value&&""!==t&&("paid-by-seller"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidBySeller:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-buyer"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByBuyer:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-owner"===t&&customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByOwner:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}),key++,renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts())});var totalSellerCostsEl=document.querySelector(".total-seller-costs"),totalBuyerCostsEl=document.querySelector(".total-buyer-costs"),totalOwnerCostsEl=document.querySelector(".total-owner-costs"),netSellerProceedsEl=document.querySelector(".net-seller-proceeds"),allCostEls=document.querySelectorAll(".cost-group__cost-wrapper");