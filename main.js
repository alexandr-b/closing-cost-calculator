function formatNumber(e,t){let o=e;if(Number.isFinite(o))o=String(t?o:Math.round(o));else if(!o||"string"!=typeof o)return"";o=o.replace(t?/[^\d\.]/g:/([^\d\.]|(\.\d*)+$)/g,""),t&&/^\./.test(o)&&(o="0"+o);const n=t?Number.isFinite(t)&&t>0?new RegExp(`((?<=\\..*)\\.|(?<=\\.\\d{${t}})\\d+$|^0+(?=\\d))`,"g"):/((?<=\..*)\.|^0+(?=\d))/g:/(\D|^0+(?=\d))/g,s=/(?<!\.\d*)\B(?=(\d{3})+(?!\d))/g;return o.replace(n,"").replace(s,",")}function setCustomExpensePayer(e){paidByRadioBtns.forEach(function(t){t.id.includes(e)&&(t.checked=!0)})}function editCustomeExpense(e){var t=customExpenseItems.filter(function(t){return t.keyId===e});customExpenseTitle.value=t[0].feeDescription,t[0].paidBySeller?customExpenseValue.value=formatNumber(t[0].paidBySeller):t[0].paidByBuyer?customExpenseValue.value=formatNumber(t[0].paidByBuyer):t[0].paidByOwner&&(customExpenseValue.value=formatNumber(t[0].paidByOwner)),paidByRadioBtns.forEach(function(e){e.id===t[0].paidBy&&(e.checked=!0)}),customExpenseForm.classList.add("update-form"),customExpenseForm.setAttribute("data-key",t[0].keyId),customExpenseForm.style.display="block",calculateAllCosts()}function deleteCustomeExpense(e){customExpenseItems=customExpenseItems.filter(function(t){return t.keyId!==e}),renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),calculateAllCosts()}function renderExpense(e){var t="";e.paidBySeller&&e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidBySeller?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$0</div>\n</div>\n</div>`:e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$0</div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidByOwner&&(t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper owner block">\n<div class="cost-group__cost-amount owner-cost-wrapper">$<span class="owner-cost">${formatNumber(e.paidByOwner)}</span></div>\n</div>\n</div>`);var o=document.querySelector(e.targetClass),n=document.createElement("div");n.innerHTML=t,o.appendChild(n)}function renderCustomExpenses(e){customCostsResults.innerHTML="",e.forEach(function(e){renderExpense(e)})}function renderCustomExpenseControl(e){customCostsControlOutput.innerHTML="",e.length>0?customCostsControlsContainer.style.display="block":0===e.length&&(customCostsControlsContainer.style.display="none"),e.forEach(function(e){var t="";e.paidBySeller?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidBySeller)}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByBuyer?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByBuyer)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByOwner&&(t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByOwner)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`);var o=document.createElement("div");o.innerHTML=t,customCostsControlOutput.appendChild(o)})}function calculateAllCosts(){var e=document.querySelectorAll(".cost-group__cost-wrapper"),t=0,o=0,n=0;e.forEach(function(e){var s=e.querySelector(".seller-cost"),r=e.querySelector(".buyer-cost"),a=e.querySelector(".owner-cost");s?isNaN(Number(s.textContent.replaceAll(",","")))||(t+=Number(s.textContent.replaceAll(",",""))):r?isNaN(Number(r.textContent.replaceAll(",","")))||(o+=Number(r.textContent.replaceAll(",",""))):a&&(isNaN(Number(a.textContent.replaceAll(",","")))||(n+=Number(a.textContent.replaceAll(",",""))))}),totalSellerCostsEl.textContent=formatNumber(t),totalBuyerCostsEl.textContent=formatNumber(o),totalOwnerCostsEl.textContent=formatNumber(n);var s=parseFloat(document.querySelector("#sale-price").value.replaceAll(",",""))-t;netSellerProceedsEl.textContent=formatNumber(s)}window.addEventListener("load",function(){function e(){var e=document.querySelector("#sales-with-mortgage");e.checked=!0,V.disabled=!0,g("disable")}function t(){Y.forEach(function(e){e.style.display="flex"})}function o(){ne.forEach(function(e){e.innerHTML="",e.closest(".cost-group__wrapper").style.display="block"})}function n(){ne.forEach(function(e){var t=e.querySelectorAll(".cost-group__cost");t.length?e.closest(".cost-group__wrapper").style.display="flex":e.closest(".cost-group__wrapper").style.display="none"})}function s(){z.forEach(function(e){e.style.display="flex"}),M.forEach(function(e){e.style.display="flex"}),U.forEach(function(e){e.style.display="flex"}),W.forEach(function(e){e.style.display="flex"}),G.forEach(function(e){e.style.display="none"})}function r(){J.forEach(function(e){e.classList.remove("disabled-text")})}function a(){X&&X.classList.add("download-pdf-active"),Q&&(Q.disabled=!1),Z&&(Z.disabled=!1)}function l(){X&&X.classList.remove("download-pdf-active"),Q&&(Q.disabled=!0),Z&&(Z.disabled=!0)}function c(e){return`${e.toLocaleDateString().replace(/[\/\.]/g,"-")}_${e.toLocaleTimeString().replace(/:/g,"-").replace(/[\s\.]/g,"")}`}function i(e){function t(e){const t=[e.querySelector(".cost-group__cost-title").textContent];for(const o of e.querySelectorAll(".cost-group__cost-wrapper"))"none"!==window.getComputedStyle(o).display&&t.push(o.querySelector(".cost-group__cost-amount").textContent);return t}const o={address:document.querySelector(".google-location-info").textContent,closingDate:(document.querySelector("input.closing-date:not([disabled])")||{value:""}).value,preparedBy:Q.value,preparedFor:Z.value,tables:[]};for(const n of e.querySelectorAll(".cost-group__wrapper")){if("none"===window.getComputedStyle(n).display)continue;const e=[n.querySelector(".cost-group__title").textContent],s=[];for(const t of n.querySelectorAll(".cost-group__header .cost-group__cost-wrapper"))"none"!==window.getComputedStyle(t).display&&e.push(t.textContent);if(/custom-expenses/.test(n.className))for(const e of n.querySelectorAll(".additional-expense__wrapper .cost-group__cost"))"none"!==window.getComputedStyle(e).display&&s.push(t(e));for(const e of n.lastElementChild.querySelectorAll(".cost-group__cost"))s.push(t(e));o.tables.push({head:e,rows:s})}return o}function u(e){function t({className:e,tag:t,value:o}){const n=document.createElement(t);return n.innerHTML=o,e&&(n.className=e),n}function o(e){const o=document.createElement("tr");for(const n of e){const e=t({tag:"th",value:n});o.appendChild(e)}return o}function n({columns:e,head:o}){const n=document.createElement("tr");n.className=e[0].toLowerCase().replace(/\W+/g,"-");for(let s=0;s<e.length;s++){const r=e[s],a=t({className:s?"table-row-value "+o[s].toLowerCase():"table-row-title",tag:"td",value:r});n.appendChild(a)}return n}const s=[];for(const t of e.tables){const e=document.createElement("table"),r=document.createElement("thead"),a=document.createElement("tbody");r.appendChild(o(t.head));for(const e of t.rows)a.append(n({columns:e,head:t.head}));e.append(r,a),s.push(e)}return s}function d(){se.style.display="flex",re.forEach(function(e){e.style.display="block"}),ae.forEach(function(e){e.style.display="block",e.style.opacity="0",e.style.pointerEvents="none"}),ie.forEach(function(e){e.style.opacity="0"}),le.style.opacity="0",ce.style.opacity="0"}function p(){se.style.display="none",re.forEach(function(e){e.style.opacity="0",setTimeout(function(){e.style.display="none",e.style.opacity="1"},800)}),ie.forEach(function(e){e.style.opacity="1"}),ae.forEach(function(e){e.style.display="none"}),le.style.opacity="1",ce.style.opacity="1"}function m(){P.forEach(function(e){e.addEventListener("keypress",function(e){var t=e.target.value;(e.which<48||e.which>57)&&("."===e.key?t.includes(".")&&e.preventDefault():e.preventDefault())})})}function y(){P.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value.replaceAll(",",""),o=e.target.id;if(o.includes("amount")){var n=o.replace("amount","percentage"),s=document.querySelector(`#${n}`);if(s){var r=parseFloat(D.value.replaceAll(",",""));Number.isFinite(r)&&(s.value=formatNumber(t/r*100,2))}}else if(o.includes("percentage")){n=o.replace("percentage","amount"),s=document.querySelector(`#${n}`);if(s){r=parseFloat(D.value.replaceAll(",",""));Number.isFinite(r)&&(s.value=formatNumber(r*t/100))}}})})}function f(e){"sales-with-mortgage"===e?(s(),K.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"sales-with-cash"===e?(s(),z.forEach(function(e){e.style.display="none"}),K.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"refinance"===e&&(s(),M.forEach(function(e){e.style.display="none"}),W.forEach(function(e){e.style.display="none"}),U.forEach(function(e){e.style.display="none"}),G.forEach(function(e){e.style.display="flex"}),K.classList.add("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems))}function v(){var e=D.value.replaceAll(",",""),t=$.value.replaceAll(",",""),o=T.value.replaceAll(",","");N.checked?ee&&Number(e)>0&&Number(t)>0&&Number(t)<=Number(e)&&Number(o)>=0&&Number(o)<=100?V.disabled=!1:V.disabled=!0:I.checked?ee&&Number(e)>0?V.disabled=!1:V.disabled=!0:L.checked&&(ee&&Number(t)>0?V.disabled=!1:V.disabled=!0)}function g(e){O.forEach(function(t){var o=t.querySelectorAll("input");o.forEach(function(t){t.disabled="enable"!==e})})}function b(e){var t=A+"/validate-address",o="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",n=new Headers;n.append("Content-Type","application/json"),n.append("X-API-KEY",o);var s={method:"POST",headers:n,body:JSON.stringify(e)},r=new Request(t,s);fetch(r).then(e=>e.json()).then(e=>{Ee=e,Ee.statusCode?h(Ee.message):S()})}function E(e){bUrl=A+"/rates";var t="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",o=new Headers;o.append("Content-Type","application/json"),o.append("X-API-KEY",t);var n={method:"POST",headers:o,body:JSON.stringify(e)};l(),d();var s=new Request(bUrl,n);fetch(s).then(e=>{if(e.ok)return e.json();throw new Error("")}).then(e=>{Ee=e,C(),q(),p()}).catch(e=>{_(),p()})}function x(){xe=new google.maps.places.Autocomplete(document.getElementById("property-address"),{types:["geocode"],componentRestrictions:{country:["US"]},fields:["adr_address","address_components"]}),xe.addListener("place_changed",w)}function h(e){Se.style.borderColor="#ED5564",he.style.color="#ED5564",we.style.display="block",we.innerHTML=e||'Sorry, Endpoint is only available in these <a class="property-error-link" href="/licenses#counties">select locations</a>',ee=!1,v()}function S(){we.style.display="none",Se.style.borderColor="#A2A2A2",he.style.color="#858585",ee=!0,v()}function w(){oe={};var e=xe.getPlace();if(e.address_components){be.innerHTML=e.adr_address;var t=be.querySelector(".street-address"),o=be.querySelector(".locality"),n=be.querySelector(".region"),s=be.querySelector(".postal-code");t?(oe.street1=t.textContent,oe.street2=""):(oe.street1="",oe.street2=""),oe.city=o?o.textContent:"",oe.state=n?n.textContent:"",oe.zipCode=s?s.textContent:"";var r=e.address_components.filter(e=>e.long_name.includes("County"));if(r.length?oe.county=r[0].long_name.replace(" County",""):oe.county="",N.checked?oe.transactionType="Sale w/ Mortgage":I.checked?oe.transactionType="Sale/Cash":L.checked&&(oe.transactionType="Refinance"),Se.blur(),""===oe.street1||""===oe.city||""===oe.state||""===oe.zipCode)return void h("We couldn't find that address. Please enter a street address, city, and state.");b(oe)}else h(),v()}function C(){var e="",t="",o=0,s=0,r=0,l=0;for(const[n,a]of Object.entries(Ee)){"Owner's Title Insurance"===n?e=".owners-title-insurance":"Lender's Title Insurance"===n?e=".lenders-title-insurance":"Taxes and other Government Fees Section"===n?e=".taxes-government-fees":"Settlement/Escrow"===n&&(e=".settlement-escrow");for(const[n,i]of Object.entries(a)){t=i.feeDescription;for(const[n,a]of Object.entries(i))if("payments"==n){for(const[e,t]of Object.entries(a))"Seller"==t.feePaidBy?o=t.feeAmount:L.checked&&"Buyer"==t.feePaidBy?r=t.feeAmount:"Buyer"==t.feePaidBy&&(s=t.feeAmount);var c={targetClass:e,feeDescription:t,paidBySeller:o,paidByBuyer:s,paidByOwner:r,keyId:l};renderExpense(c),o=0,s=0,r=0,l++}}}n(),calculateAllCosts(),a()}function _(){Ce.style.display="flex"}function q(){Ce.style.display="none"}var A=/webflow/i.test(window.location.hostname)?"https://fee-calculator-service.development.endpointclosing.com":"https://fee-calculator-service.endpointclosing.com",k=document.querySelector(".fee-calculator__results-bottom"),B=document.querySelector(".transaction-type--container"),N=document.querySelector("#sales-with-mortgage"),I=document.querySelector("#sales-with-cash"),L=document.querySelector("#refinance"),D=document.querySelector("#sale-price"),$=document.querySelector("#loan-amount"),T=document.querySelector("#loan-percentage"),V=document.querySelector(".calculate-fees"),F=document.querySelectorAll("#property-form input[type=text]:not(#property-address)"),O=document.querySelectorAll(".form--disabled"),P=document.querySelectorAll(".number-input"),R=document.querySelector(".additional-expense-form"),z=document.querySelectorAll(".hide-for-cash"),H=document.querySelectorAll(".hide-for-cash-form"),M=document.querySelectorAll(".hide-for-refinance"),j=document.querySelectorAll(".hide-for-refinance-form"),U=document.querySelectorAll(".buyer"),W=document.querySelectorAll(".seller"),G=document.querySelectorAll(".owner"),K=document.querySelector(".custom-expenses-form-control"),Y=document.querySelectorAll(".base-input"),J=document.querySelectorAll(".disabled-text"),X=document.querySelector(".download-pdf"),Q=document.querySelector("#Prepared-By-2"),Z=document.querySelector("#Prepared-For-2"),ee=!1,te=!1,oe={},ne=document.querySelectorAll(".api-fetched-items");X.addEventListener("click",function(){if(!X.classList.contains("download-pdf-active"))return;const e=document.createElement("div");e.style.width="880px";const t=i(k),o=u(t),n=document.querySelector(".disclaimer-text").cloneNode(!0),s=document.querySelector(".navigation-logo"),r=document.createElement("style");r.innerHTML="table{margin-bottom:32px;width:100%;border-collapse:separate;border-spacing:0;font-size:16px;line-height:22px}table thead th{margin-bottom:16px;border-bottom:1px solid #ced2e0;font-size:16px;font-weight:600;line-height:41px}table tbody td{color:#474747;font-size:14px;font-weight:400;line-height:37px}table tbody tr.estimated-net-proceeds td:not(:first-child){font-size:16px;font-weight:600}table tbody tr.estimated-net-proceeds td.seller{color:#0084b4}table tbody tr.estimated-net-proceeds td.buyer{color:#858585}table tbody td:first-child,table thead th:first-child{width:50%;text-align:left}table tbody td:not(:first-child),table thead th:not(:first-child){width:25%;text-align:right}.disclaimer-text{margin-top:48px}",e.appendChild(r);for(const t of o)e.appendChild(t);"anonymous"!==s.crossOrigin&&(s.crossOrigin="*");for(var a=0;a<n.children.length;a++){const e=n.children[a];if("A"===e.tagName){for(const t in e.dataset)switch(t){case"beforebegin":case"afterend":case"beforebegin":case"beforeend":e.insertAdjacentText(t,e.dataset[t])}e.innerText=e.href}}e.appendChild(n),new window.jspdf.jsPDF({unit:"px",format:"a4"}).html(e,{callback(e){const t=document.createElement("canvas");t.width=372,t.height=80,t.getContext("2d").drawImage(s,0,0,t.width,t.height),e.addImage(t.toDataURL("image/png"),"PNG",32,32,74.5,16).save(`closing-cost_${c(new Date)}.pdf`)},margin:[72,32,32,32],x:0,y:0,width:380,windowWidth:880})});var se=document.querySelector(".loading-spinner__container"),re=document.querySelectorAll(".cost-data__animation-container"),ae=document.querySelectorAll(".cost-data-template"),le=document.querySelector(".additional-expense__wrapper"),ce=document.querySelector(".net-proceeds__wrapper"),ie=document.querySelectorAll(".total-cost");P.forEach(function(e){e.addEventListener("input",function(e){e.target.value=formatNumber(e.target.value,e.target.id.includes("percentage")?2:0)})}),B.addEventListener("change",function(e){var o=e.target;if(te?te&&("sales-with-mortgage"===o.id?t():"sales-with-cash"===o.id?(t(),H.forEach(function(e){e.style.display="none"})):"refinance"===o.id&&(t(),j.forEach(function(e){e.style.display="none"}))):f(o.id),oe&&oe.street1&&oe.city&&oe.state&&oe.zipCode){"sales-with-mortgage"===o.id?oe.transactionType="Sale w/ Mortgage":"sales-with-cash"===o.id?oe.transactionType="Sale/Cash":"refinance"===o.id&&(oe.transactionType="Refinance");var n={};n.street1=oe.street1,n.street2=oe.street2,n.city=oe.city,n.county=oe.county,n.state=oe.state,n.zipCode=oe.zipcode,n.transactionType=oe.transactionType,b(n)}}),F.forEach(function(e){e.addEventListener("input",function(e){v()})}),e(),y(),m();var ue=document.querySelectorAll("input[type=text]");ue.forEach(function(e){e.addEventListener("focus",function(e){e.target.classList.add("in-focus")}),e.addEventListener("blur",function(e){e.target.classList.remove("in-focus")})});var de=document.querySelectorAll(".input-amount");D.addEventListener("input",function(e){var t=Number(e.target.value.replaceAll(",",""));de.forEach(function(e){const o=parseFloat(e.value.replaceAll(",",""));if(Number.isFinite(o)&&o>0){var n=document.querySelector(`#${e.id.replace("amount","percentage")}`);n&&(n.value=formatNumber(o/t*100,2))}})}),P.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelectorAll(".fee-calculator__input"),r=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",s.forEach(function(e){e.style.borderColor="#ED5564"}),r.style.display="block"):(n.style.color="#858585",s.forEach(function(e){e.style.borderColor="#A2A2A2"}),r.style.display="none")})}),P.forEach(function(e){e.addEventListener("paste",function(e){var t=(e.clipboardData||window.clipboardData).getData("text");if(isNaN(Number(t)))e.preventDefault();else{if(!t.includes("-"))return!0;e.preventDefault(),e.target.value=t.replace("-","")}})});var pe=document.querySelectorAll(".additional-expense-form input:not(.closing-date)"),me=[];pe.forEach(function(e){e.addEventListener("input",function(e){targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount"));const t=document.querySelector(`.${targetId} .seller-cost`),o=parseFloat(document.querySelector(`#${targetId}`).value.replaceAll(",","")),n=parseFloat(D.value.replaceAll(",",""));Number.isFinite(o)&&Number.isFinite(n)&&o>0&&o<n?t.textContent=formatNumber(o):t.textContent="0",calculateAllCosts()})});var ye=!1,fe=!1,ve=!1;pe.forEach(function(e){e.addEventListener("blur",function(e){if(targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount")),targetValue=document.querySelector(`#${targetId}`).value.replaceAll(",",""),targetId.includes("listing"))if(ye)if(0===Number(targetValue))me=me.filter(function(e){return"Estimated Listing Agent Commissions"!==e.feeDescription}),ye=!1;else for(var t in me)"Estimated Listing Agent Commissions"===me[t].feeDescription&&(me[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(me.push({feeDescription:"Estimated Listing Agent Commissions",paidBySeller:Number(targetValue)}),ye=!0);else if(targetId.includes("selling"))if(fe)if(0===Number(targetValue))me=me.filter(function(e){return"Estimated Selling Agent Commissions"!==e.feeDescription}),fe=!1;else for(var t in me)"Estimated Selling Agent Commissions"===me[t].feeDescription&&(me[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(me.push({feeDescription:"Estimated Selling Agent Commissions",paidBySeller:Number(targetValue)}),fe=!0);else if(targetId.includes("current"))if(ve)if(0===Number(targetValue))me=me.filter(function(e){return"Current Loan Payoff"!==e.feeDescription}),ve=!1;else for(var t in me)"Current Loan Payoff"===me[t].feeDescription&&(me[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(me.push({feeDescription:"Current Loan Payoff",paidBySeller:Number(targetValue)}),ve=!0)})});var ge=document.querySelector(".closing-date");ge.addEventListener("blur",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",ge.style.borderColor="#ED5564",s.style.display="block"):(n.style.color="#858585",ge.style.borderColor="#A2A2A2",s.style.display="none")});var be=document.querySelector(".google-location-info"),Ee={};let xe;var he=document.querySelector(".property-label"),Se=document.querySelector("#property-address"),we=document.querySelector(".property-error");Se.addEventListener("change",function(){v()}),Se.addEventListener("blur",function(e){""===e.target.value&&h("Please enter an address"),v()}),Se.addEventListener("keypress",function(e){if(13==e.which){var t=document.querySelectorAll(".pac-container .pac-item");t.length>0&&(google.maps.event.trigger(e.target,"keydown",{keyCode:40,hasRanOnce:!0}),google.maps.event.trigger(e.target,"keydown",{keyCode:13,hasRanOnce:!0}))}});var Ce=document.querySelector(".api-call-error"),_e=document.querySelector(".api-call-error__close");_e.addEventListener("click",function(e){Ce.style.display="none"}),V.addEventListener("click",function(e){e.preventDefault();var t="";N.checked?(t="sales-with-mortgage",oe.transactionType="Sale w/ Mortgage",oe.salesAmount=Number(D.value.replaceAll(",","")),oe.loanAmount=Number($.value.replaceAll(",","")),setCustomExpensePayer("seller")):I.checked?(t="sales-with-cash",oe.transactionType="Sale/Cash",oe.salesAmount=Number(D.value.replaceAll(",","")),oe.loanAmount=0,setCustomExpensePayer("seller")):L.checked&&(t="refinance",oe.transactionType="Refinance",oe.salesAmount=0,oe.loanAmount=Number($.value.replaceAll(",","")),setCustomExpensePayer("owner")),oe.effectiveDate=new Date(Date.now()-60*(new Date).getTimezoneOffset()*1e3).toISOString().substring(0,10),E(oe),te?(o(),f(t)):(g("enable"),R.classList.remove("form--disabled"),r(),document.querySelector(".add-custom-expense--disabled").classList.remove("add-custom-expense--disabled"),te=!0),calculateAllCosts()}),x()});var addCustomExpenseBtn=document.querySelector(".add-custom-expense"),customExpenseForm=document.querySelector(".custom-expense-form"),customExpenseTitle=document.querySelector("#additional-expense-name"),customExpenseValue=document.querySelector("#additional-expense-value"),paidByRadioBtns=document.querySelectorAll(".paid-by__radio-button"),deleteExpenseBtn=document.querySelector(".delete-custom-expense"),customCostsResults=document.querySelector(".custom-costs"),saveExpenseBtn=document.querySelector(".save-custom-expense"),cancelExpenseBtn=document.querySelector(".cancel-custom-expense"),updateExpenseBtn=document.querySelector(".update-custom-expense"),customCostsControlsContainer=(deleteExpenseBtn=document.querySelector(".delete-custom-expense"),document.querySelector(".custom-expenses-form-control")),customCostsControlOutput=document.querySelector(".custom-costs-control-wrapper"),customExpenseItems=[],key=1;customExpenseTitle.addEventListener("blur",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelector(".fee-calculator__input"),r=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",s.style.borderColor="#ED5564",r.style.display="block"):(n.style.color="#858585",s.style.borderColor="#A2A2A2",r.style.display="none")}),addCustomExpenseBtn.addEventListener("click",function(){customExpenseForm.style.display="block"}),deleteExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t=customExpenseForm.dataset.key;deleteCustomeExpense(t),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts()}),cancelExpenseBtn.addEventListener("click",function(e){customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form")}),updateExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";for(var o in paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),customExpenseItems)if(customExpenseItems[o].keyId==customExpenseForm.dataset.key){customExpenseItems[o].feeDescription=customExpenseTitle.value,"paid-by-seller"===t?(customExpenseItems[o].paidBySeller=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[o].paidByBuyer=""):"paid-by-buyer"===t?(customExpenseItems[o].paidByBuyer=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[o].paidBySeller=""):"paid-by-owner"===t&&(customExpenseItems[o].paidByOwner=Number(customExpenseValue.value.replaceAll(",",""))),customExpenseItems[o].paidBy=t;break}customExpenseTitle.value="",customExpenseValue.value="",renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form"),calculateAllCosts()}),saveExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),""!==customExpenseTitle.value&&""!==customExpenseValue.value&&""!==t&&("paid-by-seller"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidBySeller:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-buyer"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByBuyer:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-owner"===t&&customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByOwner:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}),key++,renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts())});var totalSellerCostsEl=document.querySelector(".total-seller-costs"),totalBuyerCostsEl=document.querySelector(".total-buyer-costs"),totalOwnerCostsEl=document.querySelector(".total-owner-costs"),netSellerProceedsEl=document.querySelector(".net-seller-proceeds"),allCostEls=document.querySelectorAll(".cost-group__cost-wrapper");