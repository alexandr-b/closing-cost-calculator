function formatNumber(e,t){let o=e;if(Number.isFinite(o))o=String(t?o:Math.round(o));else if(!o||"string"!=typeof o)return"";o=o.replace(t?/[^\d\.]/g:/([^\d\.]|(\.\d*)+$)/g,""),t&&/^\./.test(o)&&(o="0"+o);const n=t?Number.isFinite(t)&&t>0?new RegExp(`((?<=\\..*)\\.|(?<=\\.\\d{${t}})\\d+$|^0+(?=\\d))`,"g"):/((?<=\..*)\.|^0+(?=\d))/g:/(\D|^0+(?=\d))/g,s=/(?<!\.\d*)\B(?=(\d{3})+(?!\d))/g;return o.replace(n,"").replace(s,",")}function setCustomExpensePayer(e){paidByRadioBtns.forEach(function(t){t.id.includes(e)&&(t.checked=!0)})}function editCustomeExpense(e){var t=customExpenseItems.filter(function(t){return t.keyId===e});customExpenseTitle.value=t[0].feeDescription,t[0].paidBySeller?customExpenseValue.value=formatNumber(t[0].paidBySeller):t[0].paidByBuyer?customExpenseValue.value=formatNumber(t[0].paidByBuyer):t[0].paidByOwner&&(customExpenseValue.value=formatNumber(t[0].paidByOwner)),paidByRadioBtns.forEach(function(e){e.id===t[0].paidBy&&(e.checked=!0)}),customExpenseForm.classList.add("update-form"),customExpenseForm.setAttribute("data-key",t[0].keyId),customExpenseForm.style.display="block",calculateAllCosts()}function deleteCustomeExpense(e){customExpenseItems=customExpenseItems.filter(function(t){return t.keyId!==e}),renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),calculateAllCosts()}function renderExpense(e){var t="";e.paidBySeller&&e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidBySeller?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$<span class="seller-cost">${formatNumber(e.paidBySeller)}</span></div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$0</div>\n</div>\n</div>`:e.paidByBuyer?t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper seller">\n<div class="cost-group__cost-amount seller-cost-wrapper">$0</div>\n</div>\n<div class="cost-group__cost-wrapper buyer">\n<div class="cost-group__cost-amount buyer-cost-wrapper">$<span class="buyer-cost">${formatNumber(e.paidByBuyer)}</span></div>\n</div>\n</div>`:e.paidByOwner&&(t=`<div class="cost-group__cost ${e.keyId}">\n<div class="cost-group__title-wrapper">\n<div class="cost-group__cost-title">${e.feeDescription}</div>\n</div>\n<div class="cost-group__cost-wrapper owner block">\n<div class="cost-group__cost-amount owner-cost-wrapper">$<span class="owner-cost">${formatNumber(e.paidByOwner)}</span></div>\n</div>\n</div>`);var o=document.querySelector(e.targetClass),n=document.createElement("div");n.innerHTML=t,o.appendChild(n)}function renderCustomExpenses(e){customCostsResults.innerHTML="",e.forEach(function(e){renderExpense(e)})}function renderCustomExpenseControl(e){customCostsControlOutput.innerHTML="",e.length>0?customCostsControlsContainer.style.display="block":0===e.length&&(customCostsControlsContainer.style.display="none"),e.forEach(function(e){var t="";e.paidBySeller?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidBySeller)}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByBuyer?t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">--</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByBuyer)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`:e.paidByOwner&&(t=`<div class="custom-expenses-form-control-item" id="${e.keyId}">\n  <div class="custom-expenses-title">${e.feeDescription}</div>\n  <div class="custom-expenses-amount">$${formatNumber(e.paidByOwner)}</div>\n  <div class="aligner">\n  <a onclick="editCustomeExpense('${e.keyId}')" class="custom-expenses-edit w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005acb39a8f5c266b0d65_Edit.svg" loading="lazy" alt="" class="edit-icon"></a>\n  <a onclick="deleteCustomeExpense('${e.keyId}')" class="custom-expenses-delete w-inline-block"><img src="https://uploads-ssl.webflow.com/60cbe5ccea9fa161ea3e1b9b/60f005beb23abeee2a534b56_Delete.svg" loading="lazy" alt="" class="delete-icon"></a>\n  </div>\n  </div>`);var o=document.createElement("div");o.innerHTML=t,customCostsControlOutput.appendChild(o)})}function calculateAllCosts(){var e=document.querySelectorAll(".cost-group__cost-wrapper"),t=0,o=0,n=0;e.forEach(function(e){var s=e.querySelector(".seller-cost"),r=e.querySelector(".buyer-cost"),a=e.querySelector(".owner-cost");s?isNaN(Number(s.textContent.replaceAll(",","")))||(t+=Number(s.textContent.replaceAll(",",""))):r?isNaN(Number(r.textContent.replaceAll(",","")))||(o+=Number(r.textContent.replaceAll(",",""))):a&&(isNaN(Number(a.textContent.replaceAll(",","")))||(n+=Number(a.textContent.replaceAll(",",""))))}),totalSellerCostsEl.textContent=formatNumber(t),totalBuyerCostsEl.textContent=formatNumber(o),totalOwnerCostsEl.textContent=formatNumber(n);var s=parseFloat(document.querySelector("#sale-price").value.replaceAll(",",""))-t;netSellerProceedsEl.textContent=formatNumber(s)}window.addEventListener("load",function(){function e(){var e=document.querySelector("#sales-with-mortgage");e.checked=!0,V.disabled=!0,b("disable")}function t(){X.forEach(function(e){e.style.display="flex"})}function o(){re.forEach(function(e){e.innerHTML="",e.closest(".cost-group__wrapper").style.display="block"})}function n(){re.forEach(function(e){var t=e.querySelectorAll(".cost-group__cost");t.length?e.closest(".cost-group__wrapper").style.display="flex":e.closest(".cost-group__wrapper").style.display="none"})}function s(){M.forEach(function(e){e.style.display="flex"}),U.forEach(function(e){e.style.display="flex"}),G.forEach(function(e){e.style.display="flex"}),K.forEach(function(e){e.style.display="flex"}),Y.forEach(function(e){e.style.display="none"})}function r(){Q.forEach(function(e){e.classList.remove("disabled-text")})}function a(){Z&&Z.classList.add("download-pdf-active"),ee&&(ee.disabled=!1),te&&(te.disabled=!1)}function l(){Z&&Z.classList.remove("download-pdf-active"),ee&&(ee.disabled=!0),te&&(te.disabled=!0)}function c(e,t){return e instanceof Date?Intl.DateTimeFormat("en-US",t).format(e).replace(/,/g,""):e}function i(){const e=new Date,t=e.toLocaleDateString().replace(/[\/\.]/g,"-"),o=e.toLocaleTimeString().replace(/:/g,"-").replace(/[\s\.]/g,"");return`closing-cost_${t}_${o}.pdf`}function u(e){function t(e){function t(t){return(e.querySelector(`.${t}`)||{textContent:""}).textContent}function o(e){return e.filter(function(e){return e})}return o([t("street-address"),o([t("locality"),t("region"),t("country-name")]).join(" "),t("postal")])}function o(e){const t=e.closest(".fee-calculator__input-container");return t&&"none"!==window.getComputedStyle(t).display?`$${e.value}`:""}function n(e){const t=[e.querySelector(".cost-group__cost-title").textContent];for(const o of e.querySelectorAll(".cost-group__cost-wrapper"))"none"!==window.getComputedStyle(o).display&&t.push(o.querySelector(".cost-group__cost-amount").textContent);return t}const s={address:t(document.querySelector(".google-location-info")),closingDate:(document.querySelector("input.closing-date:not([disabled])")||{value:""}).value,preparedBy:ee.value,preparedFor:te.value,salePrice:o(T),loanAmount:o(P),netProceeds:netSellerProceedsEl.textContent,tables:[]};for(const t of e.querySelectorAll(".cost-group__wrapper")){if("none"===window.getComputedStyle(t).display)continue;const e=[t.querySelector(".cost-group__title").textContent],o=[];for(const o of t.querySelectorAll(".cost-group__header .cost-group__cost-wrapper"))"none"!==window.getComputedStyle(o).display&&e.push(o.textContent);if(/custom-expenses/.test(t.className))for(const e of t.querySelectorAll(".additional-expense__wrapper .cost-group__cost"))"none"!==window.getComputedStyle(e).display&&o.push(n(e));for(const e of t.lastElementChild.querySelectorAll(".cost-group__cost"))o.push(n(e));s.tables.push({head:e,rows:o})}return s}function d(e){function t(t){function n({content:e,node:t}){for(const o of e){const e=document.createElement("h3");e.innerText=o.head,t.appendChild(e);for(const e of o.parahraphs){const o=document.createElement("p");o.innerText=e,t.appendChild(o)}}}switch(t){case"address":{const s=document.createElement("div");s.className=t;const r=[{head:"Property Address",parahraphs:e.address}];n({content:r,node:s}),o.appendChild(s);break}case"amounts":{const s=document.createElement("div");s.className=t;const r=[{head:"Estimated Net Proceeds",parahraphs:[`$${e.netProceeds}`]}];e.loanAmount&&r.unshift({head:"Loan Amount",parahraphs:[e.loanAmount]}),e.salePrice&&r.unshift({head:"Sales Price",parahraphs:[e.salePrice]}),n({content:r,node:s}),o.appendChild(s);break}case"report":{const s=document.createElement("div");s.className=t;const r={month:"numeric",day:"numeric",year:"numeric"},a=[{head:"Report Date",parahraphs:[c(new Date,{...r,hour:"numeric",minute:"numeric"})]}];e.preparedBy&&a.unshift({head:"Prepared By",parahraphs:[e.preparedBy]}),e.preparedFor&&a.unshift({head:"Prepared For",parahraphs:[e.preparedFor]}),e.closingDate&&a.push({head:"Closing Date",parahraphs:[c(new Date(e.closingDate),r)]}),n({content:a,node:s}),o.appendChild(s);break}}}const o=document.createElement("header");return t("address"),t("amounts"),t("report"),o}function p(e){function t({className:e,tag:t,value:o}){const n=document.createElement(t);return n.innerHTML=o,e&&(n.className=e),n}function o(e){const o=document.createElement("tr");for(const n of e){const e=t({tag:"th",value:n});o.appendChild(e)}return o}function n({columns:e,head:o}){const n=document.createElement("tr");n.className=e[0].toLowerCase().replace(/\W+/g,"-");for(let s=0;s<e.length;s++){const r=e[s],a=t({className:s?"table-row-value "+o[s].toLowerCase():"table-row-title",tag:"td",value:r});n.appendChild(a)}return n}const s=[];for(const t of e.tables){const e=document.createElement("table"),r=document.createElement("thead"),a=document.createElement("tbody");r.appendChild(o(t.head));for(const e of t.rows)a.append(n({columns:e,head:t.head}));e.append(r,a),s.push(e)}return s}function m(){ae.style.display="flex",le.forEach(function(e){e.style.display="block"}),ce.forEach(function(e){e.style.display="block",e.style.opacity="0",e.style.pointerEvents="none"}),de.forEach(function(e){e.style.opacity="0"}),ie.style.opacity="0",ue.style.opacity="0"}function f(){ae.style.display="none",le.forEach(function(e){e.style.opacity="0",setTimeout(function(){e.style.display="none",e.style.opacity="1"},800)}),de.forEach(function(e){e.style.opacity="1"}),ce.forEach(function(e){e.style.display="none"}),ie.style.opacity="1",ue.style.opacity="1"}function y(){R.forEach(function(e){e.addEventListener("keypress",function(e){var t=e.target.value;(e.which<48||e.which>57)&&("."===e.key?t.includes(".")&&e.preventDefault():e.preventDefault())})})}function g(){R.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value.replaceAll(",",""),o=e.target.id;if(o.includes("amount")){var n=o.replace("amount","percentage"),s=document.querySelector(`#${n}`);if(s){var r=parseFloat(T.value.replaceAll(",",""));Number.isFinite(r)&&(s.value=formatNumber(t/r*100,2))}}else if(o.includes("percentage")){n=o.replace("percentage","amount"),s=document.querySelector(`#${n}`);if(s){r=parseFloat(T.value.replaceAll(",",""));Number.isFinite(r)&&(s.value=formatNumber(r*t/100))}}})})}function v(e){"sales-with-mortgage"===e?(s(),J.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"sales-with-cash"===e?(s(),M.forEach(function(e){e.style.display="none"}),J.classList.remove("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems)):"refinance"===e&&(s(),U.forEach(function(e){e.style.display="none"}),K.forEach(function(e){e.style.display="none"}),G.forEach(function(e){e.style.display="none"}),Y.forEach(function(e){e.style.display="flex"}),J.classList.add("for-owner"),customExpenseItems=[],renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems))}function h(){var e=T.value.replaceAll(",",""),t=P.value.replaceAll(",",""),o=F.value.replaceAll(",","");L.checked?oe&&Number(e)>0&&Number(t)>0&&Number(t)<=Number(e)&&Number(o)>=0&&Number(o)<=100?V.disabled=!1:V.disabled=!0:D.checked?oe&&Number(e)>0?V.disabled=!1:V.disabled=!0:$.checked&&(oe&&Number(t)>0?V.disabled=!1:V.disabled=!0)}function b(e){z.forEach(function(t){var o=t.querySelectorAll("input");o.forEach(function(t){t.disabled="enable"!==e})})}function E(e){var t=B+"/validate-address",o="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",n=new Headers;n.append("Content-Type","application/json"),n.append("X-API-KEY",o);var s={method:"POST",headers:n,body:JSON.stringify(e)},r=new Request(t,s);fetch(r).then(e=>e.json()).then(e=>{xe=e,xe.statusCode?S(xe.message):C()})}function x(e){bUrl=B+"/rates";var t="BdbtnilW4WHxtYLHq5zgUn21YI4hyNzGShfVPwU6kd22cKDKygRdyvLarwGkSR4VTeqmPATvaou",o=new Headers;o.append("Content-Type","application/json"),o.append("X-API-KEY",t);var n={method:"POST",headers:o,body:JSON.stringify(e)};l(),m();var s=new Request(bUrl,n);fetch(s).then(e=>{if(e.ok)return e.json();throw new Error("")}).then(e=>{xe=e,q(),k(),f()}).catch(e=>{A(),f()})}function w(){we=new google.maps.places.Autocomplete(document.getElementById("property-address"),{types:["geocode"],componentRestrictions:{country:["US"]},fields:["adr_address","address_components"]}),we.addListener("place_changed",_)}function S(e){Ce.style.borderColor="#ED5564",Se.style.color="#ED5564",_e.style.display="block",_e.innerHTML=e||'Sorry, Endpoint is only available in these <a class="property-error-link" href="/licenses#counties">select locations</a>',oe=!1,h()}function C(){_e.style.display="none",Ce.style.borderColor="#A2A2A2",Se.style.color="#858585",oe=!0,h()}function _(){se={};var e=we.getPlace();if(e.address_components){Ee.innerHTML=e.adr_address;var t=Ee.querySelector(".street-address"),o=Ee.querySelector(".locality"),n=Ee.querySelector(".region"),s=Ee.querySelector(".postal-code");t?(se.street1=t.textContent,se.street2=""):(se.street1="",se.street2=""),se.city=o?o.textContent:"",se.state=n?n.textContent:"",se.zipCode=s?s.textContent:"";var r=e.address_components.filter(e=>e.long_name.includes("County"));if(r.length?se.county=r[0].long_name.replace(" County",""):se.county="",L.checked?se.transactionType="Sale w/ Mortgage":D.checked?se.transactionType="Sale/Cash":$.checked&&(se.transactionType="Refinance"),Ce.blur(),""===se.street1||""===se.city||""===se.state||""===se.zipCode)return void S("We couldn't find that address. Please enter a street address, city, and state.");E(se)}else S(),h()}function q(){var e="",t="",o=0,s=0,r=0,l=0;for(const[n,a]of Object.entries(xe)){"Owner's Title Insurance"===n?e=".owners-title-insurance":"Lender's Title Insurance"===n?e=".lenders-title-insurance":"Taxes and other Government Fees Section"===n?e=".taxes-government-fees":"Settlement/Escrow"===n&&(e=".settlement-escrow");for(const[n,i]of Object.entries(a)){t=i.feeDescription;for(const[n,a]of Object.entries(i))if("payments"==n){for(const[e,t]of Object.entries(a))"Seller"==t.feePaidBy?o=t.feeAmount:$.checked&&"Buyer"==t.feePaidBy?r=t.feeAmount:"Buyer"==t.feePaidBy&&(s=t.feeAmount);var c={targetClass:e,feeDescription:t,paidBySeller:o,paidByBuyer:s,paidByOwner:r,keyId:l};renderExpense(c),o=0,s=0,r=0,l++}}}n(),calculateAllCosts(),a()}function A(){qe.style.display="flex"}function k(){qe.style.display="none"}var B=/webflow/i.test(window.location.hostname)?"https://fee-calculator-service.development.endpointclosing.com":"https://fee-calculator-service.endpointclosing.com",N=document.querySelector(".fee-calculator__results-bottom"),I=document.querySelector(".transaction-type--container"),L=document.querySelector("#sales-with-mortgage"),D=document.querySelector("#sales-with-cash"),$=document.querySelector("#refinance"),T=document.querySelector("#sale-price"),P=document.querySelector("#loan-amount"),F=document.querySelector("#loan-percentage"),V=document.querySelector(".calculate-fees"),O=document.querySelectorAll("#property-form input[type=text]:not(#property-address)"),z=document.querySelectorAll(".form--disabled"),R=document.querySelectorAll(".number-input"),H=document.querySelector(".additional-expense-form"),M=document.querySelectorAll(".hide-for-cash"),j=document.querySelectorAll(".hide-for-cash-form"),U=document.querySelectorAll(".hide-for-refinance"),W=document.querySelectorAll(".hide-for-refinance-form"),G=document.querySelectorAll(".buyer"),K=document.querySelectorAll(".seller"),Y=document.querySelectorAll(".owner"),J=document.querySelector(".custom-expenses-form-control"),X=document.querySelectorAll(".base-input"),Q=document.querySelectorAll(".disabled-text"),Z=document.querySelector(".download-pdf"),ee=document.querySelector("#Prepared-By-2"),te=document.querySelector("#Prepared-For-2"),oe=!1,ne=!1,se={},re=document.querySelectorAll(".api-fetched-items");Z.addEventListener("click",function(){if(!Z.classList.contains("download-pdf-active"))return;const e=u(N),t=p(e),o=document.querySelector(".disclaimer-text").cloneNode(!0),n=document.createElement("div");n.style.width="880px";const s=document.createElement("style");s.innerHTML="table{margin-bottom:48px;width:100%;border-collapse:separate;border-spacing:0;font-size:16px;line-height:22px}table thead th{margin-bottom:16px;border-bottom:1px solid #ced2e0;font-size:16px;font-weight:600;line-height:41px}table tbody td{color:#474747;font-size:14px;font-weight:400;line-height:37px}table tbody tr.estimated-net-proceeds td:not(:first-child){font-size:16px;font-weight:600}table tbody tr.estimated-net-proceeds td.seller{color:#0084b4}table tbody tr.estimated-net-proceeds td.buyer{color:#858585}table tbody td:first-child,table thead th:first-child{width:50%;text-align:left}table tbody td:not(:first-child),table thead th:not(:first-child){width:25%;text-align:right}.disclaimer-text{margin-top:0}header{margin-bottom:48px;display:grid;grid-template-columns:300px auto 300px}header h3{margin:0;font-size:16px;font-weight:600;line-height:24px}header p{margin:0;color:#474747;font-size:14px;font-weight:400;line-height:22px}header p+h3{margin-top:12px}header .address{text-align:left}header .amounts{text-align:center}header .amounts p{color:#0084b4;font-size:24px;font-weight:600;line-height:40px}header .report{text-align:right}",n.appendChild(s),n.appendChild(d(e));for(const e of t)n.appendChild(e);for(var r=0;r<o.children.length;r++){const e=o.children[r];if("A"===e.tagName){for(const t in e.dataset)switch(t){case"beforebegin":case"afterend":case"beforebegin":case"beforeend":e.insertAdjacentText(t,e.dataset[t])}e.innerText=e.href}}n.appendChild(o);const a=document.querySelector(".navigation-logo");"anonymous"!==a.crossOrigin&&(a.crossOrigin="*"),new window.jspdf.jsPDF({unit:"px",format:"a4"}).html(n,{autoPaging:"text",callback(e){const t=document.createElement("canvas");t.width=372,t.height=80,t.getContext("2d").drawImage(a,0,0,t.width,t.height),e.setPage(1).addImage(t.toDataURL("image/png"),"PNG",348,16,74.5,16).save(i())},width:380,margin:[64,32,32,32],windowWidth:880})});var ae=document.querySelector(".loading-spinner__container"),le=document.querySelectorAll(".cost-data__animation-container"),ce=document.querySelectorAll(".cost-data-template"),ie=document.querySelector(".additional-expense__wrapper"),ue=document.querySelector(".net-proceeds__wrapper"),de=document.querySelectorAll(".total-cost");R.forEach(function(e){e.addEventListener("input",function(e){e.target.value=formatNumber(e.target.value,e.target.id.includes("percentage")?2:0)})}),I.addEventListener("change",function(e){var o=e.target;if(ne?ne&&("sales-with-mortgage"===o.id?t():"sales-with-cash"===o.id?(t(),j.forEach(function(e){e.style.display="none"})):"refinance"===o.id&&(t(),W.forEach(function(e){e.style.display="none"}))):v(o.id),se&&se.street1&&se.city&&se.state&&se.zipCode){"sales-with-mortgage"===o.id?se.transactionType="Sale w/ Mortgage":"sales-with-cash"===o.id?se.transactionType="Sale/Cash":"refinance"===o.id&&(se.transactionType="Refinance");var n={};n.street1=se.street1,n.street2=se.street2,n.city=se.city,n.county=se.county,n.state=se.state,n.zipCode=se.zipcode,n.transactionType=se.transactionType,E(n)}}),O.forEach(function(e){e.addEventListener("input",function(e){h()})}),e(),g(),y();var pe=document.querySelectorAll("input[type=text]");pe.forEach(function(e){e.addEventListener("focus",function(e){e.target.classList.add("in-focus")}),e.addEventListener("blur",function(e){e.target.classList.remove("in-focus")})});var me=document.querySelectorAll(".input-amount");T.addEventListener("input",function(e){var t=Number(e.target.value.replaceAll(",",""));me.forEach(function(e){const o=parseFloat(e.value.replaceAll(",",""));if(Number.isFinite(o)&&o>0){var n=document.querySelector(`#${e.id.replace("amount","percentage")}`);n&&(n.value=formatNumber(o/t*100,2))}})}),R.forEach(function(e){e.addEventListener("input",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelectorAll(".fee-calculator__input"),r=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",s.forEach(function(e){e.style.borderColor="#ED5564"}),r.style.display="block"):(n.style.color="#858585",s.forEach(function(e){e.style.borderColor="#A2A2A2"}),r.style.display="none")})}),R.forEach(function(e){e.addEventListener("paste",function(e){var t=(e.clipboardData||window.clipboardData).getData("text");if(isNaN(Number(t)))e.preventDefault();else{if(!t.includes("-"))return!0;e.preventDefault(),e.target.value=t.replace("-","")}})});var fe=document.querySelectorAll(".additional-expense-form input:not(.closing-date)"),ye=[];fe.forEach(function(e){e.addEventListener("input",function(e){targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount"));const t=document.querySelector(`.${targetId} .seller-cost`),o=parseFloat(document.querySelector(`#${targetId}`).value.replaceAll(",","")),n=parseFloat(T.value.replaceAll(",",""));Number.isFinite(o)&&Number.isFinite(n)&&o>0&&o<n?t.textContent=formatNumber(o):t.textContent="0",calculateAllCosts()})});var ge=!1,ve=!1,he=!1;fe.forEach(function(e){e.addEventListener("blur",function(e){if(targetId=e.target.id,targetId.includes("percentage")&&(targetId=targetId.replace("percentage","amount")),targetValue=document.querySelector(`#${targetId}`).value.replaceAll(",",""),targetId.includes("listing"))if(ge)if(0===Number(targetValue))ye=ye.filter(function(e){return"Estimated Listing Agent Commissions"!==e.feeDescription}),ge=!1;else for(var t in ye)"Estimated Listing Agent Commissions"===ye[t].feeDescription&&(ye[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ye.push({feeDescription:"Estimated Listing Agent Commissions",paidBySeller:Number(targetValue)}),ge=!0);else if(targetId.includes("selling"))if(ve)if(0===Number(targetValue))ye=ye.filter(function(e){return"Estimated Selling Agent Commissions"!==e.feeDescription}),ve=!1;else for(var t in ye)"Estimated Selling Agent Commissions"===ye[t].feeDescription&&(ye[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ye.push({feeDescription:"Estimated Selling Agent Commissions",paidBySeller:Number(targetValue)}),ve=!0);else if(targetId.includes("current"))if(he)if(0===Number(targetValue))ye=ye.filter(function(e){return"Current Loan Payoff"!==e.feeDescription}),he=!1;else for(var t in ye)"Current Loan Payoff"===ye[t].feeDescription&&(ye[t].paidBySeller=Number(targetValue));else Number(targetValue)>0&&(ye.push({feeDescription:"Current Loan Payoff",paidBySeller:Number(targetValue)}),he=!0)})});var be=document.querySelector(".closing-date");be.addEventListener("blur",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",be.style.borderColor="#ED5564",s.style.display="block"):(n.style.color="#858585",be.style.borderColor="#A2A2A2",s.style.display="none")});var Ee=document.querySelector(".google-location-info"),xe={};let we;var Se=document.querySelector(".property-label"),Ce=document.querySelector("#property-address"),_e=document.querySelector(".property-error");Ce.addEventListener("change",function(){h()}),Ce.addEventListener("blur",function(e){""===e.target.value&&S("Please enter an address"),h()}),Ce.addEventListener("keypress",function(e){if(13==e.which){var t=document.querySelectorAll(".pac-container .pac-item");t.length>0&&(google.maps.event.trigger(e.target,"keydown",{keyCode:40,hasRanOnce:!0}),google.maps.event.trigger(e.target,"keydown",{keyCode:13,hasRanOnce:!0}))}});var qe=document.querySelector(".api-call-error"),Ae=document.querySelector(".api-call-error__close");Ae.addEventListener("click",function(e){qe.style.display="none"}),V.addEventListener("click",function(e){e.preventDefault();var t="";L.checked?(t="sales-with-mortgage",se.transactionType="Sale w/ Mortgage",se.salesAmount=Number(T.value.replaceAll(",","")),se.loanAmount=Number(P.value.replaceAll(",","")),setCustomExpensePayer("seller")):D.checked?(t="sales-with-cash",se.transactionType="Sale/Cash",se.salesAmount=Number(T.value.replaceAll(",","")),se.loanAmount=0,setCustomExpensePayer("seller")):$.checked&&(t="refinance",se.transactionType="Refinance",se.salesAmount=0,se.loanAmount=Number(P.value.replaceAll(",","")),setCustomExpensePayer("owner")),se.effectiveDate=new Date(Date.now()-60*(new Date).getTimezoneOffset()*1e3).toISOString().substring(0,10),x(se),ne?(o(),v(t)):(b("enable"),H.classList.remove("form--disabled"),r(),document.querySelector(".add-custom-expense--disabled").classList.remove("add-custom-expense--disabled"),ne=!0),calculateAllCosts()}),w(),l()});var addCustomExpenseBtn=document.querySelector(".add-custom-expense"),customExpenseForm=document.querySelector(".custom-expense-form"),customExpenseTitle=document.querySelector("#additional-expense-name"),customExpenseValue=document.querySelector("#additional-expense-value"),paidByRadioBtns=document.querySelectorAll(".paid-by__radio-button"),deleteExpenseBtn=document.querySelector(".delete-custom-expense"),customCostsResults=document.querySelector(".custom-costs"),saveExpenseBtn=document.querySelector(".save-custom-expense"),cancelExpenseBtn=document.querySelector(".cancel-custom-expense"),updateExpenseBtn=document.querySelector(".update-custom-expense"),customCostsControlsContainer=(deleteExpenseBtn=document.querySelector(".delete-custom-expense"),document.querySelector(".custom-expenses-form-control")),customCostsControlOutput=document.querySelector(".custom-costs-control-wrapper"),customExpenseItems=[],key=1;customExpenseTitle.addEventListener("blur",function(e){var t=e.target.value,o=e.target.closest(".fee-calculator__input-container"),n=o.querySelector(".fee-calculator__input-label"),s=o.querySelector(".fee-calculator__input"),r=o.querySelector(".form-error");""===t?(n.style.color="#ED5564",s.style.borderColor="#ED5564",r.style.display="block"):(n.style.color="#858585",s.style.borderColor="#A2A2A2",r.style.display="none")}),addCustomExpenseBtn.addEventListener("click",function(){customExpenseForm.style.display="block"}),deleteExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t=customExpenseForm.dataset.key;deleteCustomeExpense(t),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts()}),cancelExpenseBtn.addEventListener("click",function(e){customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form")}),updateExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";for(var o in paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),customExpenseItems)if(customExpenseItems[o].keyId==customExpenseForm.dataset.key){customExpenseItems[o].feeDescription=customExpenseTitle.value,"paid-by-seller"===t?(customExpenseItems[o].paidBySeller=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[o].paidByBuyer=""):"paid-by-buyer"===t?(customExpenseItems[o].paidByBuyer=Number(customExpenseValue.value.replaceAll(",","")),customExpenseItems[o].paidBySeller=""):"paid-by-owner"===t&&(customExpenseItems[o].paidByOwner=Number(customExpenseValue.value.replaceAll(",",""))),customExpenseItems[o].paidBy=t;break}customExpenseTitle.value="",customExpenseValue.value="",renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseForm.style.display="none",customExpenseForm.classList.remove("update-form"),calculateAllCosts()}),saveExpenseBtn.addEventListener("click",function(e){e.preventDefault();var t="";paidByRadioBtns.forEach(function(e){e.checked&&(t=e.value)}),""!==customExpenseTitle.value&&""!==customExpenseValue.value&&""!==t&&("paid-by-seller"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidBySeller:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-buyer"===t?customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByBuyer:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}):"paid-by-owner"===t&&customExpenseItems.push({keyId:`costId-${key}`,feeDescription:customExpenseTitle.value,paidByOwner:Number(customExpenseValue.value.replaceAll(",","")),targetClass:".custom-costs",paidBy:t}),key++,renderCustomExpenses(customExpenseItems),renderCustomExpenseControl(customExpenseItems),customExpenseTitle.value="",customExpenseValue.value="",customExpenseForm.style.display="none",calculateAllCosts())})
;var totalSellerCostsEl=document.querySelector(".total-seller-costs"),totalBuyerCostsEl=document.querySelector(".total-buyer-costs"),totalOwnerCostsEl=document.querySelector(".total-owner-costs"),netSellerProceedsEl=document.querySelector(".net-seller-proceeds"),allCostEls=document.querySelectorAll(".cost-group__cost-wrapper");